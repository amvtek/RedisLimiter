#!/usr/bin/env bash

set -e

if ! [ -f src/sliding_window.lua ]; then
	echo "Missing file src/sliding_window.lua" >&2
	exit 1
fi

echo '#!lua name=rdslim
-- code generated by the genfunc command; DO NOT EDIT 

local function sliding_window(KEYS, ARGV)

'
cat src/sliding_window.lua
echo 'end

redis.register_function("sliding_window", sliding_window)
'
